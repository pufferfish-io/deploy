# Deploy

Репозиторий с Kubernetes-манифестами для развёртывания всего пользовательского контура Pufferfish в k3s/k8s кластере. Здесь лежит структура окружения, базовые аддоны и прикладные сервисы, которые превращают входящие сообщения в готовые ответы для Telegram и VK.

## Что внутри

`k8s/` — корневой каталог всех чартов и manifests. Внутри каталоги названы по сервисам, каждый содержит `deploy.yaml`, секреты и доп.настройки.

| Блок              | Содержимое                                                                                                           | Зачем                                               |
| ----------------- | -------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------- |
| Инфраструктура    | `cert-manager`, `ingress`, `dashboard`                                                                               | TLS, ingress/egress, мониторинг и панель управления |
| Обработка данных  | `doc2text`, `message-responder`, `message-responder-ocr`                                                             | OCR, нормализация и формирование ответа             |
| Хранилища и шина  | `minio`, `redpanda`                                                                                                  | Объектное хранилище и стриминг событий              |
| Telegram-пайплайн | `telegram-forwarder`, `telegram-normalizer`, `telegram-response-preparer`, `telegram-sender`, `tg-response-preparer` | Приём, обработка и отправка ответов в Telegram      |
| VK-пайплайн       | `vk-forwarder`, `vk-normalizer`, `vk-response-preparer`, `vk-sender`                                                 | Аналогичная цепочка для VK                          |
